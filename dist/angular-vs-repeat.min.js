function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _sliceIterator(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var s,i=e[Symbol.iterator]();!(r=(s=i.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}function _slicedToArray(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return _sliceIterator(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}!function(J,U){var Y=U.element.prototype.closest;if(!Y){var r=["matches","matchesSelector","webkitMatches","webkitMatchesSelector","msMatches","msMatchesSelector","mozMatches","mozMatchesSelector"].reduce(function(e,t){var n;return null!==(n=e)&&void 0!==n?n:t in document.documentElement?t:null},null);Y=function(e){for(var t,n=this[0].parentNode;n!==document.documentElement&&null!=n&&!n[r](e);)n=n.parentNode;return(null===(t=n)||void 0===t?void 0:t[r](e))?U.element(n):U.element()}}function X(){var e,t,n,r;return"pageYOffset"in J?{scrollTop:J.pageYOffset,scrollLeft:J.pageXOffset}:{scrollTop:null!==(e=null!==(t=document.documentElement.scrollTop)&&void 0!==t?t:document.body.scrollTop)&&void 0!==e?e:0,scrollLeft:null!==(n=null!==(r=document.documentElement.scrollLeft)&&void 0!==r?r:document.body.scrollLeft)&&void 0!==n?n:0}}function G(e,t){return e===J?"clientWidth"===t?J.innerWidth:J.innerHeight:e[t]}function d(e){var t;t="".concat(e," attribute is deprecated. Use vs-repeat-options <link> instead."),console.warn("vs-repeat deprecation: ".concat(t))}var K={latch:!1,container:null,scrollParent:null,size:null,offsetBefore:0,offsetAfter:0,scrolledToBeginning:U.noop,scrolledToEnd:U.noop,scrolledToBeginningOffset:0,scrolledToEndOffset:0,scrollMargin:0,horizontal:!1,autoresize:!1,hunked:!1,hunkSize:0},e=U.module("vs-repeat",[]).directive("vsRepeat",["$compile","$parse",function(D,F){return{restrict:"A",scope:!0,compile:function(e,t){var n="vsRepeatContainer"in t?U.element(e[0].querySelector(t.vsRepeatContainer)):e,r=n.children(),a=r.eq(0),k=a[0].outerHTML,H="$vs_collection";["vsSize","vsScrollParent","vsSizeProperty","vsHorizontal","vsOffsetBefore","vsOffsetAfter","vsScrolledToEndOffset","vsScrolledToBeginningOffset","vsExcess","vsScrollMargin"].forEach(function(e){e in t&&d(e)}),t.vsRepeat&&d("vsRepeat");var o=_slicedToArray(function(e){for(var t=["ng-repeat","data-ng-repeat","ng-repeat-start","data-ng-repeat-start"],n=0;n<t.length;n++){var r=t[n];if(e.attr(r))return[r,e.attr(r),0<=r.indexOf("-start")]}throw new Error("angular-vs-repeat: no ng-repeat directive on a child element")}(a),3),L=o[0],s=o[1],q=o[2],i=_slicedToArray(/^\s*(\S+)\s+in\s+([\S\s]+?)(track\s+by\s+\S+)?$/.exec(s),4),W=i[1],j=i[2],N=i[3];if(q)for(var l=0,c=r.eq(l);null==c.attr("ng-repeat-end")&&null==c.attr("data-ng-repeat-end");)l++,c=r.eq(l),k+=c[0].outerHTML;return n.empty(),{pre:function(m,t,e){function n(e){if("number"==typeof e.size)e.getSize=function(){return e.size};else{var t=F(String(e.size));e.getSize=function(e){return t(m,_defineProperty({},W,e))}}}m.vsRepeat={options:_extends({},K,"vsRepeatOptions"in e?m.$eval(e.vsRepeatOptions):{})};var g=m.vsRepeat.options;n(g);var R,x=U.isDefined(e.vsRepeatContainer)?U.element(t[0].querySelector(e.vsRepeatContainer)):t,r=U.element(k),a=r[0].tagName.toLowerCase(),y=[],z=U.element("<"+a+' class="vs-repeat-before-content"></'+a+">"),$=U.element("<"+a+' class="vs-repeat-after-content"></'+a+">"),b=null===g.size,I=g.scrollParent?"window"===g.scrollParent?U.element(J):Y.call(x,g.scrollParent):x,w=g.horizontal?"clientWidth":"clientHeight",o=g.horizontal?"offsetWidth":"offsetHeight",s=g.horizontal?"scrollWidth":"scrollHeight",S=g.horizontal?"scrollLeft":"scrollTop";if((m.vsRepeat.totalSize=0)===I.length)throw"Specified scroll parent selector did not match any element";if(m.vsRepeat.$scrollParent=I,m.vsRepeat.sizesCumulative=[],g.debug){var i="window"===g.scrollParent?U.element(document.body):I,l=U.element('<div class="vs-repeat-debug-element"></div>');l.css("position","window"===g.scrollParent?"fixed":"absolute"),i.append(l),m.$on("$destroy",function(){l.remove()})}var T,O,C,A,c,d=G(I[0],w)||50;function u(){!y||y.length<1?(m[H]=[],R=0,m.vsRepeat.sizesCumulative=[0]):(R=y.length,g.size?p():v()),_()}function p(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,e=y.map(function(e){var t;return null!==(t=n)&&void 0!==t?t:g.getSize(e)}),t=0;m.vsRepeat.sizesCumulative=[0].concat(_toConsumableArray(e.map(function(e){return t+=e})))}function v(){b?m.$$postDigest(function(){if(x[0].offsetHeight||x[0].offsetWidth){for(var e=x.children(),t=0,n=!1,r=!1;t<e.length;){if(null!=e[t].attributes[L]||r){if(n||(d=0),n=!0,e[t][o]&&(d+=e[t][o]),!q)break;if(null!=e[t].attributes["ng-repeat-end"]||null!=e[t].attributes["data-ng-repeat-end"])break;r=!0}t++}n&&(p(d),_(),b=!1,m.$root&&!m.$root.$$phase&&m.$apply())}else var a=m.$watch(function(){(x[0].offsetHeight||x[0].offsetWidth)&&(a(),v())})}):p(d)}function M(){var e="tr"===a?"":"min-";return g.horizontal?e+"width":e+"height"}function f(){if(P()){m.$digest();var e=m.vsRepeat.sizesCumulative[R];e!==x[0][s]&&console.warn("vsRepeat: size mismatch. Expected size "+e+"px whereas actual size is "+x[0][s]+"px. Fix vsSize on element:",t[0])}}function h(){g.autoresize&&(b=!0,v(),m.$root&&!m.$root.$$phase&&m.$apply()),P()&&m.$digest()}function _(){var e;O=T=void 0,C=R,A=0,e=m.vsRepeat.sizesCumulative[R],m.vsRepeat.totalSize=g.offsetBefore+e+g.offsetAfter,P(),m.$emit("vsRepeatReinitialized",m.vsRepeat.startIndex,m.vsRepeat.endIndex)}function E(){var e=G(I[0],w);e!==c&&(_(),m.$root&&!m.$root.$$phase&&m.$apply()),c=e}function B(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:e.length-1,a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:1;if(e[n]===t)return[n,n,a];if(e[r]===t)return[r,r,a];if(1<r-n){var o=Math.floor((n+r)/2);return e[o]>t?B(e,t,n,o,a++):B(e,t,o,r,a++)}return[n,r,a]}function P(){var e,t,n=(e=I[0],t=S,e===J?X()[t]:e[t]),r=G(I[0],w);g.debug&&(r/=2);var a,o,s,i=x[0]===I[0]?0:(a=x[0],o=I[0],s=g.horizontal,a.getBoundingClientRect()[s?"left":"top"]-(o===J?0:o.getBoundingClientRect()[s?"left":"top"])+(o===J?X():o)[s?"scrollLeft":"scrollTop"]),l=m.vsRepeat.startIndex,c=m.vsRepeat.endIndex;if(b&&!g.size)l=0,c=1;else{var d=n-g.offsetBefore-i;l=_slicedToArray(B(m.vsRepeat.sizesCumulative,d-g.scrollMargin),1)[0],l=Math.max(l,0),c=_slicedToArray(B(m.vsRepeat.sizesCumulative,d+g.scrollMargin+r,l),2)[1],c=Math.min(c,R)}C=Math.min(l,C),A=Math.max(c,A),m.vsRepeat.startIndex=g.latch?C:l,m.vsRepeat.endIndex=g.latch?A:c,A<m.vsRepeat.startIndex&&(m.vsRepeat.startIndex=A);var u=!1;if(null==T?u=!0:null==O&&(u=!0),u||(g.hunked?Math.abs(m.vsRepeat.startIndex-T)>=g.hunkSize||0===m.vsRepeat.startIndex&&0!==T?u=!0:(Math.abs(m.vsRepeat.endIndex-O)>=g.hunkSize||m.vsRepeat.endIndex===R&&O!==R)&&(u=!0):u=m.vsRepeat.startIndex!==T||m.vsRepeat.endIndex!==O),u){var p;m[H]=y.slice(m.vsRepeat.startIndex,m.vsRepeat.endIndex),m.$emit("vsRepeatInnerCollectionUpdated",m.vsRepeat.startIndex,m.vsRepeat.endIndex,T,O),g.scrolledToEnd&&(p=y.length-g.scrolledToEndOffset,(m.vsRepeat.endIndex>=p&&O<p||y.length&&m.vsRepeat.endIndex===y.length)&&m.$eval(g.scrolledToEnd)),g.scrolledToBeginning&&(p=g.scrolledToBeginningOffset,m.vsRepeat.startIndex<=p&&T>m.vsRepeat.startIndex&&m.$eval(g.scrolledToBeginning)),T=m.vsRepeat.startIndex,O=m.vsRepeat.endIndex;var v=m.vsRepeat.sizesCumulative[m.vsRepeat.startIndex]+g.offsetBefore,f=m.vsRepeat.sizesCumulative[m.vsRepeat.startIndex+m[H].length]+g.offsetBefore,h=m.vsRepeat.totalSize;z.css(M(),v+"px"),$.css(M(),h-f+"px")}return u}g.horizontal?(z.css("height","100%"),$.css("height","100%")):(z.css("width","100%"),$.css("width","100%")),e.vsRepeatOptions&&m.$watchCollection(e.vsRepeatOptions,function(e){var t=_extends({},g,e);JSON.stringify(t)!==JSON.stringify(g)&&(Object.assign(g,e),n(g),_())}),m.$watchCollection(j,function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];y=e,u()}),r.eq(0).attr(L,W+" in "+H+(N?" "+N:"")),r.addClass("vs-repeat-repeated-element"),x.append(z),x.append(r),D(r)(m),x.append($),m.vsRepeat.startIndex=0,m.vsRepeat.endIndex=0,I.on("scroll",f),U.element(J).on("resize",h),m.$on("$destroy",function(){U.element(J).off("resize",h),I.off("scroll",f)}),m.$on("vsRepeatTrigger",u),m.$on("vsRepeatResize",function(){b=!0,v()}),m.$on("vsRenderAll",function(){g.latch&&setTimeout(function(){var e=R;A=Math.max(e,A),m.vsRepeat.endIndex=g.latch?A:e,m[H]=y.slice(m.vsRepeat.startIndex,m.vsRepeat.endIndex),O=m.vsRepeat.endIndex,m.$$postDigest(function(){z.css(M(),0),$.css(M(),0)}),m.$apply(function(){m.$emit("vsRenderAllDone")})})}),m.$watch(function(){"function"==typeof J.requestAnimationFrame?J.requestAnimationFrame(E):E()})}}}}}]);U.element(document.head).append('<style id="angular-vs-repeat-style">\n\t  \t.vs-repeat-debug-element {\n        top: 50%;\n        left: 0;\n        right: 0;\n        height: 1px;\n        background: red;\n        z-index: 99999999;\n        box-shadow: 0 0 20px red;\n      }\n\n      .vs-repeat-debug-element + .vs-repeat-debug-element {\n        display: none;\n      }\n    </style>'),"undefined"!=typeof module&&module.exports&&(module.exports=e.name)}(window,window.angular);