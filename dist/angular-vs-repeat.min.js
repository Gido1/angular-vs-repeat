!function(Y,U){var n=["matches","matchesSelector","webkitMatches","webkitMatchesSelector","msMatches","msMatchesSelector","mozMatches","mozMatchesSelector"].reduce(function(e,t){var n;return null!==(n=e)&&void 0!==n?n:t in document.documentElement?t:null},null),X=U.element.prototype.closest||function(e){for(var t=this[0].parentNode;t!==document.documentElement&&null!=t&&!t[n](e);)t=t.parentNode;return t&&t[n](e)?U.element(t):U.element()};function _(){if("pageYOffset"in Y)return{scrollTop:pageYOffset,scrollLeft:pageXOffset};var e,t=document,n=t.documentElement,s=t.body;return e=n.scrollLeft||s.scrollLeft||0,{scrollTop:n.scrollTop||s.scrollTop||0,scrollLeft:e}}function G(e,t){return e===Y?"clientWidth"===t?Y.innerWidth:Y.innerHeight:e[t]}var e=U.module("vs-repeat",[]).directive("vsRepeat",["$compile","$parse",function(N,j){return{restrict:"A",scope:!0,compile:function(e,t){var n,s,A,H,L,k,r=U.isDefined(t.vsRepeatContainer)?U.element(e[0].querySelector(t.vsRepeatContainer)):e,a=r.children().eq(0),q=a[0].outerHTML,D="$vs_collection",W=!1,F={vsRepeat:"elementSize",vsOffsetBefore:"offsetBefore",vsOffsetAfter:"offsetAfter",vsScrolledToEndOffset:"scrolledToEndOffset",vsScrolledToBeginningOffset:"scrolledToBeginningOffset",vsExcess:"excess",vsScrollMargin:"scrollMargin"};if(a.attr("ng-repeat"))k="ng-repeat",n=a.attr("ng-repeat");else if(a.attr("data-ng-repeat"))k="data-ng-repeat",n=a.attr("data-ng-repeat");else if(a.attr("ng-repeat-start"))W=!0,k="ng-repeat-start",n=a.attr("ng-repeat-start");else{if(!a.attr("data-ng-repeat-start"))throw new Error("angular-vs-repeat: no ng-repeat directive on a child element");W=!0,k="data-ng-repeat-start",n=a.attr("data-ng-repeat-start")}if(s=/^\s*(\S+)\s+in\s+([\S\s]+?)(track\s+by\s+\S+)?$/.exec(n),A=s[1],H=s[2],L=s[3],W)for(var o=0,i=r.children().eq(0);null==i.attr("ng-repeat-end")&&null==i.attr("data-ng-repeat-end");)o++,i=r.children().eq(o),q+=i[0].outerHTML;return r.empty(),{pre:function(h,t,g){var x,$,z,S,I,n,w=U.isDefined(g.vsRepeatContainer)?U.element(t[0].querySelector(g.vsRepeatContainer)):t,e=U.element(q),s=e[0].tagName.toLowerCase(),y=[],M=void 0!==g.vsHorizontal,b=U.element("<"+s+' class="vs-repeat-before-content"></'+s+">"),T=U.element("<"+s+' class="vs-repeat-after-content"></'+s+">"),a=!g.vsRepeat,C=!!g.vsSize||!!g.vsSizeProperty,R=g.vsScrollParent?"window"===g.vsScrollParent?U.element(Y):X.call(w,g.vsScrollParent):w,B="vsOptions"in g?h.$eval(g.vsOptions):{},O=M?"clientWidth":"clientHeight",o=M?"offsetWidth":"offsetHeight",r=M?"scrollWidth":"scrollHeight",E=M?"scrollLeft":"scrollTop";if(h.totalSize=0,!("vsSize"in g)&&"vsSizeProperty"in g&&console.warn("vs-size-property attribute is deprecated. Please use vs-size attribute which also accepts angular expressions."),0===R.length)throw"Specified scroll parent selector did not match any element";if(h.$scrollParent=R,C&&(h.sizesCumulative=[]),"true"===g.vsDebug){var i="window"===g.vsScrollParent?U.element(document.body):R,l=U.element('<div class="vs-repeat-debug-element"></div>');l.css("position","window"===g.vsScrollParent?"fixed":"absolute"),i.append(l),h.$on("$destroy",function(){l.remove()})}function c(){if(!y||y.length<1)h[D]=[],x=0,h.sizesCumulative=[0];else if(x=y.length,C){h.sizes=y.map(function(e){var t=h.$new(!1);U.extend(t,e),t[A]=e;var n=g.vsSize||g.vsSizeProperty?t.$eval(g.vsSize||g.vsSizeProperty):h.elementSize;return t.$destroy(),n});var n=0;h.sizesCumulative=h.sizes.map(function(e){var t=n;return n+=e,t}),h.sizesCumulative.push(n)}else d();p()}function d(){a&&h.$$postDigest(function(){if(w[0].offsetHeight||w[0].offsetWidth){for(var e=w.children(),t=0,n=!1,s=!1;t<e.length;){if(null!=e[t].attributes[k]||s){if(n||(h.elementSize=0),n=!0,e[t][o]&&(h.elementSize+=e[t][o]),!W)break;if(null!=e[t].attributes["ng-repeat-end"]||null!=e[t].attributes["data-ng-repeat-end"])break;s=!0}t++}n&&(p(),a=!1,h.$root&&!h.$root.$$phase&&h.$apply())}else var r=h.$watch(function(){(w[0].offsetHeight||w[0].offsetWidth)&&(r(),d())})})}function P(){var e="tr"===s?"":"min-";return M?e+"width":e+"height"}function f(){if(m()){h.$digest();var e=C?h.sizesCumulative[x]:h.elementSize*x;e!==t[0][r]&&console.warn("vsRepeat: size mismatch. Expected size "+e+"px whereas actual size is "+t[0].clientHeight+"px. Fix vsSize on element:",t[0])}}function u(){void 0!==g.vsAutoresize&&(a=!0,d(),h.$root&&!h.$root.$$phase&&h.$apply()),m()&&h.$apply()}function p(){var e;z=$=void 0,S=x,I=0,e=C?h.sizesCumulative[x]:h.elementSize*x,h.totalSize=h.offsetBefore+e+h.offsetAfter,m(),h.$emit("vsRepeatReinitialized",h.startIndex,h.endIndex)}function v(){var e=G(R[0],O);e!==n&&(p(),h.$root&&!h.$root.$$phase&&h.$apply()),n=e}function m(){var e,t,n=(e=R[0],t=E,e===Y?_()[t]:e[t]),s=G(R[0],O);"true"===g.vsDebug&&(s/=2);var r,a,o,i=w[0]===R[0]?0:(r=w[0],a=R[0],o=M,r.getBoundingClientRect()[o?"left":"top"]-(a===Y?0:a.getBoundingClientRect()[o?"left":"top"])+(a===Y?_():a)[o?"scrollLeft":"scrollTop"]),l=h.startIndex,c=h.endIndex;if(C){for(l=0;h.sizesCumulative[l]<n-h.offsetBefore-i-h.scrollMargin;)l++;for(0<l&&l--,c=l=Math.max(Math.floor(l-h.excess/2),0);h.sizesCumulative[c]<n-h.offsetBefore-i+h.scrollMargin+s;)c++;c=Math.min(Math.ceil(c+h.excess/2),x)}else l=Math.max(Math.floor((n-h.offsetBefore-i-h.scrollMargin)/h.elementSize)-h.excess/2,0),c=Math.min(l+Math.ceil(s/h.elementSize)+h.excess,x);S=Math.min(l,S),I=Math.max(c,I),h.startIndex=B.latch?S:l,h.endIndex=B.latch?I:c,I<h.startIndex&&(h.startIndex=I);var d=!1;if(null==$?d=!0:null==z&&(d=!0),d||(B.hunked?Math.abs(h.startIndex-$)>=h.excess/2||0===h.startIndex&&0!==$?d=!0:(Math.abs(h.endIndex-z)>=h.excess/2||h.endIndex===x&&z!==x)&&(d=!0):d=h.startIndex!==$||h.endIndex!==z),d){var f;h[D]=y.slice(h.startIndex,h.endIndex),h.$emit("vsRepeatInnerCollectionUpdated",h.startIndex,h.endIndex,$,z),g.vsScrolledToEnd&&(f=y.length-(h.scrolledToEndOffset||0),(h.endIndex>=f&&z<f||y.length&&h.endIndex===y.length)&&h.$eval(g.vsScrolledToEnd)),g.vsScrolledToBeginning&&(f=h.scrolledToBeginningOffset||0,h.startIndex<=f&&$>h.startIndex&&h.$eval(g.vsScrolledToBeginning)),$=h.startIndex,z=h.endIndex;var u=j(C?"(sizesCumulative[$index + startIndex] + offsetBefore)":"(($index + startIndex) * elementSize + offsetBefore)"),p=u(h,{$index:0}),v=u(h,{$index:h[D].length}),m=h.totalSize;b.css(P(),p+"px"),T.css(P(),m-v+"px")}return d}h.elementSize=+g.vsRepeat||G(R[0],O)||50,h.offsetBefore=0,h.offsetAfter=0,h.scrollMargin=0,h.excess=2,M?(b.css("height","100%"),T.css("height","100%")):(b.css("width","100%"),T.css("width","100%")),Object.keys(F).forEach(function(t){g[t]&&g.$observe(t,function(e){h[F[t]]=+e,p()})}),h.$watchCollection(H,function(e){y=e||[],c()}),e.eq(0).attr(k,A+" in "+D+(L?" "+L:"")),e.addClass("vs-repeat-repeated-element"),w.append(b),w.append(e),N(e)(h),w.append(T),h.startIndex=0,h.endIndex=0,R.on("scroll",f),U.element(Y).on("resize",u),h.$on("$destroy",function(){U.element(Y).off("resize",u),R.off("scroll",f)}),h.$on("vsRepeatTrigger",c),h.$on("vsRepeatResize",function(){a=!0,d()}),h.$on("vsRenderAll",function(){B.latch&&setTimeout(function(){var e=x;I=Math.max(e,I),h.endIndex=B.latch?I:e,h[D]=y.slice(h.startIndex,h.endIndex),z=h.endIndex,h.$$postDigest(function(){b.css(P(),0),T.css(P(),0)}),h.$apply(function(){h.$emit("vsRenderAllDone")})})}),h.$watch(function(){"function"==typeof Y.requestAnimationFrame?Y.requestAnimationFrame(v):v()})}}}}}]);U.element(document.head).append(['<style id="angular-vs-repeat-style">.vs-repeat-debug-element {top: 50%;left: 0;right: 0;height: 1px;background: red;z-index: 99999999;box-shadow: 0 0 20px red}.vs-repeat-debug-element + .vs-repeat-debug-element {   display: none;}</style>'].join("")),"undefined"!=typeof module&&module.exports&&(module.exports=e.name)}(window,window.angular);