function _sliceIterator(e,t){var n=[],r=!0,s=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){s=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(s)throw o}}return n}function _slicedToArray(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return _sliceIterator(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}!function(j,Y){var U=Y.element.prototype.closest;if(!U){var r=["matches","matchesSelector","webkitMatches","webkitMatchesSelector","msMatches","msMatchesSelector","mozMatches","mozMatchesSelector"].reduce(function(e,t){var n;return null!==(n=e)&&void 0!==n?n:t in document.documentElement?t:null},null);U=function(e){for(var t,n=this[0].parentNode;n!==document.documentElement&&null!=n&&!n[r](e);)n=n.parentNode;return(null===(t=n)||void 0===t?void 0:t[r](e))?Y.element(n):Y.element()}}function X(){var e,t,n,r;return"pageYOffset"in j?{scrollTop:pageYOffset,scrollLeft:pageXOffset}:{scrollTop:null!==(e=null!==(t=document.documentElement.scrollTop)&&void 0!==t?t:document.body.scrollTop)&&void 0!==e?e:0,scrollLeft:null!==(n=null!==(r=document.documentElement.scrollLeft)&&void 0!==r?r:document.body.scrollLeft)&&void 0!==n?n:0}}function G(e,t){return e===j?"clientWidth"===t?j.innerWidth:j.innerHeight:e[t]}var e=Y.module("vs-repeat",[]).directive("vsRepeat",["$compile","$parse",function(F,N){return{restrict:"A",scope:!0,compile:function(e,t){var n="vsRepeatContainer"in t?Y.element(e[0].querySelector(t.vsRepeatContainer)):e,r=n.children(),s=r.eq(0),m=s[0].outerHTML,H="$vs_collection",L={vsRepeat:"elementSize",vsOffsetBefore:"offsetBefore",vsOffsetAfter:"offsetAfter",vsScrolledToEndOffset:"scrolledToEndOffset",vsScrolledToBeginningOffset:"scrolledToBeginningOffset",vsExcess:"excess",vsScrollMargin:"scrollMargin"},o=_slicedToArray(function(e){for(var t=["ng-repeat","data-ng-repeat","ng-repeat-start","data-ng-repeat-start"],n=0;n<t.length;n++){var r=t[n];if(e.attr(r))return[r,e.attr(r),0<=r.indexOf("-start")]}throw new Error("angular-vs-repeat: no ng-repeat directive on a child element")}(s),3),k=o[0],i=o[1],q=o[2],l=_slicedToArray(/^\s*(\S+)\s+in\s+([\S\s]+?)(track\s+by\s+\S+)?$/.exec(i),4),W=l[1],D=l[2],_=l[3];if(q)for(var a=0,c=r.eq(a);null==c.attr("ng-repeat-end")&&null==c.attr("data-ng-repeat-end");)a++,c=r.eq(a),m+=c[0].outerHTML;return n.empty(),{pre:function(h,t,g){var x,$,z,S,y,n,I=Y.isDefined(g.vsRepeatContainer)?Y.element(t[0].querySelector(g.vsRepeatContainer)):t,e=Y.element(m),r=e[0].tagName.toLowerCase(),b=[],w=void 0!==g.vsHorizontal,M=Y.element("<"+r+' class="vs-repeat-before-content"></'+r+">"),T=Y.element("<"+r+' class="vs-repeat-after-content"></'+r+">"),C=!g.vsRepeat&&!g.vsSize,R=!!g.vsSize||!!g.vsSizeProperty,B=g.vsScrollParent?"window"===g.vsScrollParent?Y.element(j):U.call(I,g.vsScrollParent):I,O="vsOptions"in g?h.$eval(g.vsOptions):{},A=w?"clientWidth":"clientHeight",o=w?"offsetWidth":"offsetHeight",s=w?"scrollWidth":"scrollHeight",E=w?"scrollLeft":"scrollTop";if(h.totalSize=0,!("vsSize"in g)&&"vsSizeProperty"in g&&console.warn("vs-size-property attribute is deprecated. Please use vs-size attribute which also accepts angular expressions."),0===B.length)throw"Specified scroll parent selector did not match any element";if(h.$scrollParent=B,R&&(h.sizesCumulative=[]),"true"===g.vsDebug){var i="window"===g.vsScrollParent?Y.element(document.body):B,l=Y.element('<div class="vs-repeat-debug-element"></div>');l.css("position","window"===g.vsScrollParent?"fixed":"absolute"),i.append(l),h.$on("$destroy",function(){l.remove()})}function a(){if(!b||b.length<1)h[H]=[],x=0,h.sizesCumulative=[0];else if(x=b.length,R){h.sizes=b.map(function(e){var t=h.$new(!1);Y.extend(t,e),t[W]=e;var n=g.vsSize||g.vsSizeProperty?t.$eval(g.vsSize||g.vsSizeProperty):h.elementSize;return t.$destroy(),n});var n=0;h.sizesCumulative=h.sizes.map(function(e){var t=n;return n+=e,t}),h.sizesCumulative.push(n)}else c();u()}function c(){C&&h.$$postDigest(function(){if(I[0].offsetHeight||I[0].offsetWidth){for(var e=I.children(),t=0,n=!1,r=!1;t<e.length;){if(null!=e[t].attributes[k]||r){if(n||(h.elementSize=0),n=!0,e[t][o]&&(h.elementSize+=e[t][o]),!q)break;if(null!=e[t].attributes["ng-repeat-end"]||null!=e[t].attributes["data-ng-repeat-end"])break;r=!0}t++}n&&(u(),C=!1,h.$root&&!h.$root.$$phase&&h.$apply())}else var s=h.$watch(function(){(I[0].offsetHeight||I[0].offsetWidth)&&(s(),c())})})}function P(){var e="tr"===r?"":"min-";return w?e+"width":e+"height"}function d(){if(p()){h.$digest();var e=R?h.sizesCumulative[x]:h.elementSize*x;e!==I[0][s]&&console.warn("vsRepeat: size mismatch. Expected size "+e+"px whereas actual size is "+I[0][s]+"px. Fix vsSize on element:",t[0])}}function f(){void 0!==g.vsAutoresize&&(C=!0,c(),h.$root&&!h.$root.$$phase&&h.$apply()),p()&&h.$apply()}function u(){var e;z=$=void 0,S=x,y=0,e=R?h.sizesCumulative[x]:h.elementSize*x,h.totalSize=h.offsetBefore+e+h.offsetAfter,p(),h.$emit("vsRepeatReinitialized",h.startIndex,h.endIndex)}function v(){var e=G(B[0],A);e!==n&&(u(),h.$root&&!h.$root.$$phase&&h.$apply()),n=e}function p(){var e,t,n=(e=B[0],t=E,e===j?X()[t]:e[t]),r=G(B[0],A);"true"===g.vsDebug&&(r/=2);var s,o,i,l=I[0]===B[0]?0:(s=I[0],o=B[0],i=w,s.getBoundingClientRect()[i?"left":"top"]-(o===j?0:o.getBoundingClientRect()[i?"left":"top"])+(o===j?X():o)[i?"scrollLeft":"scrollTop"]),a=h.startIndex,c=h.endIndex;if(R){for(a=0;h.sizesCumulative[a]<n-h.offsetBefore-l-h.scrollMargin;)a++;for(0<a&&a--,c=a=Math.max(Math.floor(a-h.excess/2),0);h.sizesCumulative[c]<n-h.offsetBefore-l+h.scrollMargin+r;)c++;c=Math.min(Math.ceil(c+h.excess/2),x)}else a=Math.max(Math.floor((n-h.offsetBefore-l-h.scrollMargin)/h.elementSize)-h.excess/2,0),c=Math.min(a+Math.ceil(r/h.elementSize)+h.excess,x),C&&a===c&&c<x-1&&c++;S=Math.min(a,S),y=Math.max(c,y),h.startIndex=O.latch?S:a,h.endIndex=O.latch?y:c,y<h.startIndex&&(h.startIndex=y);var d=!1;if(null==$?d=!0:null==z&&(d=!0),d||(O.hunked?Math.abs(h.startIndex-$)>=h.excess/2||0===h.startIndex&&0!==$?d=!0:(Math.abs(h.endIndex-z)>=h.excess/2||h.endIndex===x&&z!==x)&&(d=!0):d=h.startIndex!==$||h.endIndex!==z),d){var f;h[H]=b.slice(h.startIndex,h.endIndex),h.$emit("vsRepeatInnerCollectionUpdated",h.startIndex,h.endIndex,$,z),g.vsScrolledToEnd&&(f=b.length-(h.scrolledToEndOffset||0),(h.endIndex>=f&&z<f||b.length&&h.endIndex===b.length)&&h.$eval(g.vsScrolledToEnd)),g.vsScrolledToBeginning&&(f=h.scrolledToBeginningOffset||0,h.startIndex<=f&&$>h.startIndex&&h.$eval(g.vsScrolledToBeginning)),$=h.startIndex,z=h.endIndex;var u=N(R?"(sizesCumulative[$index + startIndex] + offsetBefore)":"(($index + startIndex) * elementSize + offsetBefore)"),v=u(h,{$index:0}),p=u(h,{$index:h[H].length}),m=h.totalSize;M.css(P(),v+"px"),T.css(P(),m-p+"px")}return d}h.elementSize=+g.vsRepeat||G(B[0],A)||50,h.offsetBefore=0,h.offsetAfter=0,h.scrollMargin=0,h.excess=2,w?(M.css("height","100%"),T.css("height","100%")):(M.css("width","100%"),T.css("width","100%")),Object.keys(L).forEach(function(t){g[t]&&g.$observe(t,function(e){h[L[t]]=+e,u()})}),h.$watchCollection(D,function(e){b=e||[],a()}),e.eq(0).attr(k,W+" in "+H+(_?" "+_:"")),e.addClass("vs-repeat-repeated-element"),I.append(M),I.append(e),F(e)(h),I.append(T),h.startIndex=0,h.endIndex=0,B.on("scroll",d),Y.element(j).on("resize",f),h.$on("$destroy",function(){Y.element(j).off("resize",f),B.off("scroll",d)}),h.$on("vsRepeatTrigger",a),h.$on("vsRepeatResize",function(){C=!0,c()}),h.$on("vsRenderAll",function(){O.latch&&setTimeout(function(){var e=x;y=Math.max(e,y),h.endIndex=O.latch?y:e,h[H]=b.slice(h.startIndex,h.endIndex),z=h.endIndex,h.$$postDigest(function(){M.css(P(),0),T.css(P(),0)}),h.$apply(function(){h.$emit("vsRenderAllDone")})})}),h.$watch(function(){"function"==typeof j.requestAnimationFrame?j.requestAnimationFrame(v):v()})}}}}}]);Y.element(document.head).append('<style id="angular-vs-repeat-style">\n\t  \t.vs-repeat-debug-element {\n        top: 50%;\n        left: 0;\n        right: 0;\n        height: 1px;\n        background: red;\n        z-index: 99999999;\n        box-shadow: 0 0 20px red;\n      }\n\n      .vs-repeat-debug-element + .vs-repeat-debug-element {\n        display: none;\n      }\n    </style>'),"undefined"!=typeof module&&module.exports&&(module.exports=e.name)}(window,window.angular);