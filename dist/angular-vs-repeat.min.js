function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _sliceIterator(e,t){var n=[],r=!0,a=!1,s=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,s=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw s}}return n}function _slicedToArray(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return _sliceIterator(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}!function(F,J){var U=J.element.prototype.closest;if(!U){var r=["matches","matchesSelector","webkitMatches","webkitMatchesSelector","msMatches","msMatchesSelector","mozMatches","mozMatchesSelector"].reduce(function(e,t){var n;return null!==(n=e)&&void 0!==n?n:t in document.documentElement?t:null},null);U=function(e){for(var t,n=this[0].parentNode;n!==document.documentElement&&null!=n&&!n[r](e);)n=n.parentNode;return(null===(t=n)||void 0===t?void 0:t[r](e))?J.element(n):J.element()}}function Y(){var e,t,n,r;return"pageYOffset"in F?{scrollTop:F.pageYOffset,scrollLeft:F.pageXOffset}:{scrollTop:null!==(e=null!==(t=document.documentElement.scrollTop)&&void 0!==t?t:document.body.scrollTop)&&void 0!==e?e:0,scrollLeft:null!==(n=null!==(r=document.documentElement.scrollLeft)&&void 0!==r?r:document.body.scrollLeft)&&void 0!==n?n:0}}function X(e,t){return e===F?"clientWidth"===t?F.innerWidth:F.innerHeight:e[t]}function d(e){var t;t="".concat(e," attribute is deprecated. Use vs-repeat-options <link> instead."),console.warn("vs-repeat deprecation: ".concat(t))}var G={latch:!1,hunked:!1,container:null,scrollParent:null,size:null,offsetBefore:0,offsetAfter:0,scrolledToBeginning:J.noop,scrolledToEnd:J.noop,scrolledToBeginningOffset:0,scrolledToEndOffset:0,scrollMargin:0,horizontal:!1,autoresize:!1,excess:0},e=J.module("vs-repeat",[]).directive("vsRepeat",["$compile","$parse",function(N,D){return{restrict:"A",scope:!0,compile:function(e,t){var n="vsRepeatContainer"in t?J.element(e[0].querySelector(t.vsRepeatContainer)):e,r=n.children(),a=r.eq(0),P=a[0].outerHTML,k="$vs_collection";["vsSize","vsScrollParent","vsSizeProperty","vsHorizontal","vsOffsetBefore","vsOffsetAfter","vsScrolledToEndOffset","vsScrolledToBeginningOffset","vsExcess","vsScrollMargin"].forEach(function(e){e in t&&d(e)}),t.vsRepeat&&d("vsRepeat");var s=_slicedToArray(function(e){for(var t=["ng-repeat","data-ng-repeat","ng-repeat-start","data-ng-repeat-start"],n=0;n<t.length;n++){var r=t[n];if(e.attr(r))return[r,e.attr(r),0<=r.indexOf("-start")]}throw new Error("angular-vs-repeat: no ng-repeat directive on a child element")}(a),3),H=s[0],o=s[1],L=s[2],i=_slicedToArray(/^\s*(\S+)\s+in\s+([\S\s]+?)(track\s+by\s+\S+)?$/.exec(o),4),q=i[1],W=i[2],j=i[3];if(L)for(var l=0,c=r.eq(l);null==c.attr("ng-repeat-end")&&null==c.attr("data-ng-repeat-end");)l++,c=r.eq(l),P+=c[0].outerHTML;return n.empty(),{pre:function(h,t,e){function n(e){if("number"==typeof e.size)e.getSize=function(){return e.size};else{var t=D(String(e.size));e.getSize=function(e){return t(h,_defineProperty({},q,e))}}}h.vsRepeat={options:_extends({},G,"vsRepeatOptions"in e?h.$eval(e.vsRepeatOptions):{})};var m=h.vsRepeat.options;n(m);var g,R=J.isDefined(e.vsRepeatContainer)?J.element(t[0].querySelector(e.vsRepeatContainer)):t,r=J.element(P),a=r[0].tagName.toLowerCase(),x=[],y=J.element("<"+a+' class="vs-repeat-before-content"></'+a+">"),z=J.element("<"+a+' class="vs-repeat-after-content"></'+a+">"),$=null===m.size,b=m.scrollParent?"window"===m.scrollParent?J.element(F):U.call(R,m.scrollParent):R,I=m.horizontal?"clientWidth":"clientHeight",s=m.horizontal?"offsetWidth":"offsetHeight",o=m.horizontal?"scrollWidth":"scrollHeight",w=m.horizontal?"scrollLeft":"scrollTop";if((h.vsRepeat.totalSize=0)===b.length)throw"Specified scroll parent selector did not match any element";if(h.vsRepeat.$scrollParent=b,h.vsRepeat.sizesCumulative=[],m.debug){var i="window"===m.scrollParent?J.element(document.body):b,l=J.element('<div class="vs-repeat-debug-element"></div>');l.css("position","window"===m.scrollParent?"fixed":"absolute"),i.append(l),h.$on("$destroy",function(){l.remove()})}var S,T,O,C,c,d=X(b[0],I)||50;function p(){!x||x.length<1?(h[k]=[],g=0,h.vsRepeat.sizesCumulative=[0]):(g=x.length,m.size?f():u()),B()}function f(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,e=x.map(function(e){var t;return null!==(t=n)&&void 0!==t?t:m.getSize(e)}),t=0;h.vsRepeat.sizesCumulative=[0].concat(_toConsumableArray(e.map(function(e){return t+=e})))}function u(){$?h.$$postDigest(function(){if(R[0].offsetHeight||R[0].offsetWidth){for(var e=R.children(),t=0,n=!1,r=!1;t<e.length;){if(null!=e[t].attributes[H]||r){if(n||(d=0),n=!0,e[t][s]&&(d+=e[t][s]),!L)break;if(null!=e[t].attributes["ng-repeat-end"]||null!=e[t].attributes["data-ng-repeat-end"])break;r=!0}t++}n&&(f(d),B(),$=!1,h.$root&&!h.$root.$$phase&&h.$apply())}else var a=h.$watch(function(){(R[0].offsetHeight||R[0].offsetWidth)&&(a(),u())})}):f(d)}function M(){var e="tr"===a?"":"min-";return m.horizontal?e+"width":e+"height"}function v(){if(_()){h.$digest();var e=h.vsRepeat.sizesCumulative[g];e!==R[0][o]&&console.warn("vsRepeat: size mismatch. Expected size "+e+"px whereas actual size is "+R[0][o]+"px. Fix vsSize on element:",t[0])}}function A(){m.autoresize&&($=!0,u(),h.$root&&!h.$root.$$phase&&h.$apply()),_()&&h.$apply()}function B(){var e;T=S=void 0,O=g,C=0,e=h.vsRepeat.sizesCumulative[g],h.vsRepeat.totalSize=m.offsetBefore+e+m.offsetAfter,_(),h.$emit("vsRepeatReinitialized",h.vsRepeat.startIndex,h.vsRepeat.endIndex)}function E(){var e=X(b[0],I);e!==c&&(B(),h.$root&&!h.$root.$$phase&&h.$apply()),c=e}function _(){var e,t,n=(e=b[0],t=w,e===F?Y()[t]:e[t]),r=X(b[0],I);m.debug&&(r/=2);var a,s,o,i=R[0]===b[0]?0:(a=R[0],s=b[0],o=m.horizontal,a.getBoundingClientRect()[o?"left":"top"]-(s===F?0:s.getBoundingClientRect()[o?"left":"top"])+(s===F?Y():s)[o?"scrollLeft":"scrollTop"]),l=h.vsRepeat.startIndex,c=h.vsRepeat.endIndex;if($&&!m.size)l=0,c=1;else{for(l=0;h.vsRepeat.sizesCumulative[l]<n-m.offsetBefore-i-m.scrollMargin;)l++;for(0<l&&l--,c=l=Math.max(Math.floor(l-m.excess/2),0);h.vsRepeat.sizesCumulative[c]<n-m.offsetBefore-i+m.scrollMargin+r;)c++;c=Math.min(Math.ceil(c+m.excess/2),g)}O=Math.min(l,O),C=Math.max(c,C),h.vsRepeat.startIndex=m.latch?O:l,h.vsRepeat.endIndex=m.latch?C:c,C<h.vsRepeat.startIndex&&(h.vsRepeat.startIndex=C);var d=!1;if(null==S?d=!0:null==T&&(d=!0),d||(m.hunked?Math.abs(h.vsRepeat.startIndex-S)>=m.excess/2||0===h.vsRepeat.startIndex&&0!==S?d=!0:(Math.abs(h.vsRepeat.endIndex-T)>=m.excess/2||h.vsRepeat.endIndex===g&&T!==g)&&(d=!0):d=h.vsRepeat.startIndex!==S||h.vsRepeat.endIndex!==T),d){var p;h[k]=x.slice(h.vsRepeat.startIndex,h.vsRepeat.endIndex),h.$emit("vsRepeatInnerCollectionUpdated",h.vsRepeat.startIndex,h.vsRepeat.endIndex,S,T),m.scrolledToEnd&&(p=x.length-m.scrolledToEndOffset,(h.vsRepeat.endIndex>=p&&T<p||x.length&&h.vsRepeat.endIndex===x.length)&&h.$eval(m.scrolledToEnd)),m.scrolledToBeginning&&(p=m.scrolledToBeginningOffset,h.vsRepeat.startIndex<=p&&S>h.vsRepeat.startIndex&&h.$eval(m.scrolledToBeginning)),S=h.vsRepeat.startIndex,T=h.vsRepeat.endIndex;var f=h.vsRepeat.sizesCumulative[h.vsRepeat.startIndex]+m.offsetBefore,u=h.vsRepeat.sizesCumulative[h.vsRepeat.startIndex+h[k].length]+m.offsetBefore,v=h.vsRepeat.totalSize;y.css(M(),f+"px"),z.css(M(),v-u+"px")}return d}m.horizontal?(y.css("height","100%"),z.css("height","100%")):(y.css("width","100%"),z.css("width","100%")),e.vsRepeatOptions&&h.$watchCollection(e.vsRepeatOptions,function(e){var t=_extends({},m,e);JSON.stringify(t)!==JSON.stringify(m)&&(Object.assign(m,e),n(m),B())}),h.$watchCollection(W,function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];x=e,p()}),r.eq(0).attr(H,q+" in "+k+(j?" "+j:"")),r.addClass("vs-repeat-repeated-element"),R.append(y),R.append(r),N(r)(h),R.append(z),h.vsRepeat.startIndex=0,h.vsRepeat.endIndex=0,b.on("scroll",v),J.element(F).on("resize",A),h.$on("$destroy",function(){J.element(F).off("resize",A),b.off("scroll",v)}),h.$on("vsRepeatTrigger",p),h.$on("vsRepeatResize",function(){$=!0,u()}),h.$on("vsRenderAll",function(){m.latch&&setTimeout(function(){var e=g;C=Math.max(e,C),h.vsRepeat.endIndex=m.latch?C:e,h[k]=x.slice(h.vsRepeat.startIndex,h.vsRepeat.endIndex),T=h.vsRepeat.endIndex,h.$$postDigest(function(){y.css(M(),0),z.css(M(),0)}),h.$apply(function(){h.$emit("vsRenderAllDone")})})}),h.$watch(function(){"function"==typeof F.requestAnimationFrame?F.requestAnimationFrame(E):E()})}}}}}]);J.element(document.head).append('<style id="angular-vs-repeat-style">\n\t  \t.vs-repeat-debug-element {\n        top: 50%;\n        left: 0;\n        right: 0;\n        height: 1px;\n        background: red;\n        z-index: 99999999;\n        box-shadow: 0 0 20px red;\n      }\n\n      .vs-repeat-debug-element + .vs-repeat-debug-element {\n        display: none;\n      }\n    </style>'),"undefined"!=typeof module&&module.exports&&(module.exports=e.name)}(window,window.angular);