!function(j,U){var X=U.element.prototype.closest;if(!X){var s=["matches","matchesSelector","webkitMatches","webkitMatchesSelector","msMatches","msMatchesSelector","mozMatches","mozMatchesSelector"].reduce(function(e,t){var n;return null!==(n=e)&&void 0!==n?n:t in document.documentElement?t:null},null);X=function(e){for(var t,n=this[0].parentNode;n!==document.documentElement&&null!=n&&!n[s](e);)n=n.parentNode;return(null===(t=n)||void 0===t?void 0:t[s](e))?U.element(n):U.element()}}function _(){var e,t,n,s;return"pageYOffset"in j?{scrollTop:pageYOffset,scrollLeft:pageXOffset}:{scrollTop:null!==(e=null!==(t=document.documentElement.scrollTop)&&void 0!==t?t:document.body.scrollTop)&&void 0!==e?e:0,scrollLeft:null!==(n=null!==(s=document.documentElement.scrollLeft)&&void 0!==s?s:document.body.scrollLeft)&&void 0!==n?n:0}}function G(e,t){return e===j?"clientWidth"===t?j.innerWidth:j.innerHeight:e[t]}var e=U.module("vs-repeat",[]).directive("vsRepeat",["$compile","$parse",function(N,Y){return{restrict:"A",scope:!0,compile:function(e,t){var n,s,A,H,L,k,r=U.isDefined(t.vsRepeatContainer)?U.element(e[0].querySelector(t.vsRepeatContainer)):e,o=r.children().eq(0),q=o[0].outerHTML,D="$vs_collection",W=!1,F={vsRepeat:"elementSize",vsOffsetBefore:"offsetBefore",vsOffsetAfter:"offsetAfter",vsScrolledToEndOffset:"scrolledToEndOffset",vsScrolledToBeginningOffset:"scrolledToBeginningOffset",vsExcess:"excess",vsScrollMargin:"scrollMargin"};if(o.attr("ng-repeat"))k="ng-repeat",n=o.attr("ng-repeat");else if(o.attr("data-ng-repeat"))k="data-ng-repeat",n=o.attr("data-ng-repeat");else if(o.attr("ng-repeat-start"))W=!0,k="ng-repeat-start",n=o.attr("ng-repeat-start");else{if(!o.attr("data-ng-repeat-start"))throw new Error("angular-vs-repeat: no ng-repeat directive on a child element");W=!0,k="data-ng-repeat-start",n=o.attr("data-ng-repeat-start")}if(s=/^\s*(\S+)\s+in\s+([\S\s]+?)(track\s+by\s+\S+)?$/.exec(n),A=s[1],H=s[2],L=s[3],W)for(var a=0,l=r.children().eq(0);null==l.attr("ng-repeat-end")&&null==l.attr("data-ng-repeat-end");)a++,l=r.children().eq(a),q+=l[0].outerHTML;return r.empty(),{pre:function(h,t,g){var x,$,z,S,I,n,y=U.isDefined(g.vsRepeatContainer)?U.element(t[0].querySelector(g.vsRepeatContainer)):t,e=U.element(q),s=e[0].tagName.toLowerCase(),w=[],b=void 0!==g.vsHorizontal,M=U.element("<"+s+' class="vs-repeat-before-content"></'+s+">"),T=U.element("<"+s+' class="vs-repeat-after-content"></'+s+">"),o=!g.vsRepeat,C=!!g.vsSize||!!g.vsSizeProperty,R=g.vsScrollParent?"window"===g.vsScrollParent?U.element(j):X.call(y,g.vsScrollParent):y,B="vsOptions"in g?h.$eval(g.vsOptions):{},O=b?"clientWidth":"clientHeight",a=b?"offsetWidth":"offsetHeight",r=b?"scrollWidth":"scrollHeight",E=b?"scrollLeft":"scrollTop";if(h.totalSize=0,!("vsSize"in g)&&"vsSizeProperty"in g&&console.warn("vs-size-property attribute is deprecated. Please use vs-size attribute which also accepts angular expressions."),0===R.length)throw"Specified scroll parent selector did not match any element";if(h.$scrollParent=R,C&&(h.sizesCumulative=[]),"true"===g.vsDebug){var l="window"===g.vsScrollParent?U.element(document.body):R,i=U.element('<div class="vs-repeat-debug-element"></div>');i.css("position","window"===g.vsScrollParent?"fixed":"absolute"),l.append(i),h.$on("$destroy",function(){i.remove()})}function d(){if(!w||w.length<1)h[D]=[],x=0,h.sizesCumulative=[0];else if(x=w.length,C){h.sizes=w.map(function(e){var t=h.$new(!1);U.extend(t,e),t[A]=e;var n=g.vsSize||g.vsSizeProperty?t.$eval(g.vsSize||g.vsSizeProperty):h.elementSize;return t.$destroy(),n});var n=0;h.sizesCumulative=h.sizes.map(function(e){var t=n;return n+=e,t}),h.sizesCumulative.push(n)}else c();p()}function c(){o&&h.$$postDigest(function(){if(y[0].offsetHeight||y[0].offsetWidth){for(var e=y.children(),t=0,n=!1,s=!1;t<e.length;){if(null!=e[t].attributes[k]||s){if(n||(h.elementSize=0),n=!0,e[t][a]&&(h.elementSize+=e[t][a]),!W)break;if(null!=e[t].attributes["ng-repeat-end"]||null!=e[t].attributes["data-ng-repeat-end"])break;s=!0}t++}n&&(p(),o=!1,h.$root&&!h.$root.$$phase&&h.$apply())}else var r=h.$watch(function(){(y[0].offsetHeight||y[0].offsetWidth)&&(r(),c())})})}function P(){var e="tr"===s?"":"min-";return b?e+"width":e+"height"}function f(){if(m()){h.$digest();var e=C?h.sizesCumulative[x]:h.elementSize*x;e!==t[0][r]&&console.warn("vsRepeat: size mismatch. Expected size "+e+"px whereas actual size is "+t[0].clientHeight+"px. Fix vsSize on element:",t[0])}}function u(){void 0!==g.vsAutoresize&&(o=!0,c(),h.$root&&!h.$root.$$phase&&h.$apply()),m()&&h.$apply()}function p(){var e;z=$=void 0,S=x,I=0,e=C?h.sizesCumulative[x]:h.elementSize*x,h.totalSize=h.offsetBefore+e+h.offsetAfter,m(),h.$emit("vsRepeatReinitialized",h.startIndex,h.endIndex)}function v(){var e=G(R[0],O);e!==n&&(p(),h.$root&&!h.$root.$$phase&&h.$apply()),n=e}function m(){var e,t,n=(e=R[0],t=E,e===j?_()[t]:e[t]),s=G(R[0],O);"true"===g.vsDebug&&(s/=2);var r,o,a,l=y[0]===R[0]?0:(r=y[0],o=R[0],a=b,r.getBoundingClientRect()[a?"left":"top"]-(o===j?0:o.getBoundingClientRect()[a?"left":"top"])+(o===j?_():o)[a?"scrollLeft":"scrollTop"]),i=h.startIndex,d=h.endIndex;if(C){for(i=0;h.sizesCumulative[i]<n-h.offsetBefore-l-h.scrollMargin;)i++;for(0<i&&i--,d=i=Math.max(Math.floor(i-h.excess/2),0);h.sizesCumulative[d]<n-h.offsetBefore-l+h.scrollMargin+s;)d++;d=Math.min(Math.ceil(d+h.excess/2),x)}else i=Math.max(Math.floor((n-h.offsetBefore-l-h.scrollMargin)/h.elementSize)-h.excess/2,0),d=Math.min(i+Math.ceil(s/h.elementSize)+h.excess,x);S=Math.min(i,S),I=Math.max(d,I),h.startIndex=B.latch?S:i,h.endIndex=B.latch?I:d,I<h.startIndex&&(h.startIndex=I);var c=!1;if(null==$?c=!0:null==z&&(c=!0),c||(B.hunked?Math.abs(h.startIndex-$)>=h.excess/2||0===h.startIndex&&0!==$?c=!0:(Math.abs(h.endIndex-z)>=h.excess/2||h.endIndex===x&&z!==x)&&(c=!0):c=h.startIndex!==$||h.endIndex!==z),c){var f;h[D]=w.slice(h.startIndex,h.endIndex),h.$emit("vsRepeatInnerCollectionUpdated",h.startIndex,h.endIndex,$,z),g.vsScrolledToEnd&&(f=w.length-(h.scrolledToEndOffset||0),(h.endIndex>=f&&z<f||w.length&&h.endIndex===w.length)&&h.$eval(g.vsScrolledToEnd)),g.vsScrolledToBeginning&&(f=h.scrolledToBeginningOffset||0,h.startIndex<=f&&$>h.startIndex&&h.$eval(g.vsScrolledToBeginning)),$=h.startIndex,z=h.endIndex;var u=Y(C?"(sizesCumulative[$index + startIndex] + offsetBefore)":"(($index + startIndex) * elementSize + offsetBefore)"),p=u(h,{$index:0}),v=u(h,{$index:h[D].length}),m=h.totalSize;M.css(P(),p+"px"),T.css(P(),m-v+"px")}return c}h.elementSize=+g.vsRepeat||G(R[0],O)||50,h.offsetBefore=0,h.offsetAfter=0,h.scrollMargin=0,h.excess=2,b?(M.css("height","100%"),T.css("height","100%")):(M.css("width","100%"),T.css("width","100%")),Object.keys(F).forEach(function(t){g[t]&&g.$observe(t,function(e){h[F[t]]=+e,p()})}),h.$watchCollection(H,function(e){w=e||[],d()}),e.eq(0).attr(k,A+" in "+D+(L?" "+L:"")),e.addClass("vs-repeat-repeated-element"),y.append(M),y.append(e),N(e)(h),y.append(T),h.startIndex=0,h.endIndex=0,R.on("scroll",f),U.element(j).on("resize",u),h.$on("$destroy",function(){U.element(j).off("resize",u),R.off("scroll",f)}),h.$on("vsRepeatTrigger",d),h.$on("vsRepeatResize",function(){o=!0,c()}),h.$on("vsRenderAll",function(){B.latch&&setTimeout(function(){var e=x;I=Math.max(e,I),h.endIndex=B.latch?I:e,h[D]=w.slice(h.startIndex,h.endIndex),z=h.endIndex,h.$$postDigest(function(){M.css(P(),0),T.css(P(),0)}),h.$apply(function(){h.$emit("vsRenderAllDone")})})}),h.$watch(function(){"function"==typeof j.requestAnimationFrame?j.requestAnimationFrame(v):v()})}}}}}]);U.element(document.head).append('<style id="angular-vs-repeat-style">\n\t  \t.vs-repeat-debug-element {\n        top: 50%;\n        left: 0;\n        right: 0;\n        height: 1px;\n        background: red;\n        z-index: 99999999;\n        box-shadow: 0 0 20px red;\n      }\n\n      .vs-repeat-debug-element + .vs-repeat-debug-element {\n        display: none;\n      }\n    </style>'),"undefined"!=typeof module&&module.exports&&(module.exports=e.name)}(window,window.angular);