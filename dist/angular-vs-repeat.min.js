function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _sliceIterator(e,t){var n=[],r=!0,o=!1,s=void 0;try{for(var l,a=e[Symbol.iterator]();!(r=(l=a.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){o=!0,s=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw s}}return n}function _slicedToArray(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return _sliceIterator(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}!function(j,D){var F=D.element.prototype.closest;if(!F){var r=["matches","matchesSelector","webkitMatches","webkitMatchesSelector","msMatches","msMatchesSelector","mozMatches","mozMatchesSelector"].reduce(function(e,t){var n;return null!==(n=e)&&void 0!==n?n:t in document.documentElement?t:null},null);F=function(e){for(var t,n=this[0].parentNode;n!==document.documentElement&&null!=n&&!n[r](e);)n=n.parentNode;return(null===(t=n)||void 0===t?void 0:t[r](e))?D.element(n):D.element()}}function J(){var e,t,n,r;return"pageYOffset"in j?{scrollTop:j.pageYOffset,scrollLeft:j.pageXOffset}:{scrollTop:null!==(e=null!==(t=document.documentElement.scrollTop)&&void 0!==t?t:document.body.scrollTop)&&void 0!==e?e:0,scrollLeft:null!==(n=null!==(r=document.documentElement.scrollLeft)&&void 0!==r?r:document.body.scrollLeft)&&void 0!==n?n:0}}function U(e,t){return e===j?"clientWidth"===t?j.innerWidth:j.innerHeight:e[t]}function d(e){var t;t="".concat(e," attribute is deprecated. Use vs-repeat-options <link> instead."),console.warn("vs-repeat deprecation: ".concat(t))}var Y={latch:!1,hunked:!1,container:null,scrollParent:null,size:null,offsetBefore:0,offsetAfter:0,scrolledToBeginning:D.noop,scrolledToEnd:D.noop,scrolledToBeginningOffset:0,scrolledToEndOffset:0,scrollMargin:0,horizontal:!1,autoresize:!1},e=D.module("vs-repeat",[]).directive("vsRepeat",["$compile","$parse",function(W,N){return{restrict:"A",scope:!0,compile:function(e,t){var n="vsRepeatContainer"in t?D.element(e[0].querySelector(t.vsRepeatContainer)):e,r=n.children(),o=r.eq(0),A=o[0].outerHTML,P="$vs_collection";["vsSize","vsScrollParent","vsSizeProperty","vsHorizontal","vsOffsetBefore","vsOffsetAfter","vsScrolledToEndOffset","vsScrolledToBeginningOffset","vsExcess","vsScrollMargin"].forEach(function(e){e in t&&d(e)}),t.vsRepeat&&d("vsRepeat");var s=_slicedToArray(function(e){for(var t=["ng-repeat","data-ng-repeat","ng-repeat-start","data-ng-repeat-start"],n=0;n<t.length;n++){var r=t[n];if(e.attr(r))return[r,e.attr(r),0<=r.indexOf("-start")]}throw new Error("angular-vs-repeat: no ng-repeat directive on a child element")}(o),3),_=s[0],l=s[1],k=s[2],a=_slicedToArray(/^\s*(\S+)\s+in\s+([\S\s]+?)(track\s+by\s+\S+)?$/.exec(l),4),H=a[1],L=a[2],q=a[3];if(k)for(var i=0,c=r.eq(i);null==c.attr("ng-repeat-end")&&null==c.attr("data-ng-repeat-end");)i++,c=r.eq(i),A+=c[0].outerHTML;return n.empty(),{pre:function(m,t,e){m.vsRepeat={options:_extends({},Y,"vsRepeatOptions"in e?m.$eval(e.vsRepeatOptions):{})};var g,x,$,z,y,n,I=m.vsRepeat.options,S=D.isDefined(e.vsRepeatContainer)?D.element(t[0].querySelector(e.vsRepeatContainer)):t,r=D.element(A),o=r[0].tagName.toLowerCase(),w=[],b=D.element("<"+o+' class="vs-repeat-before-content"></'+o+">"),M=D.element("<"+o+' class="vs-repeat-after-content"></'+o+">"),T=null===I.size,R=!T,O=I.scrollParent?"window"===I.scrollParent?D.element(j):F.call(S,I.scrollParent):S,C=I.horizontal?"clientWidth":"clientHeight",s=I.horizontal?"offsetWidth":"offsetHeight",l=I.horizontal?"scrollWidth":"scrollHeight",B=I.horizontal?"scrollLeft":"scrollTop";if((m.totalSize=0)===O.length)throw"Specified scroll parent selector did not match any element";if(m.$scrollParent=O,R&&(m.sizesCumulative=[]),I.debug){var a="window"===I.scrollParent?D.element(document.body):O,i=D.element('<div class="vs-repeat-debug-element"></div>');i.css("position","window"===I.scrollParent?"fixed":"absolute"),a.append(i),m.$on("$destroy",function(){i.remove()})}function c(){if(!w||w.length<1)m[P]=[],g=0,m.sizesCumulative=[0];else if(g=w.length,R){m.sizes=w.map(function(e){var t=m.$new(!1);D.extend(t,e),t[H]=e;var n=R?t.$eval(String(I.size)):m.elementSize;return t.$destroy(),n});var n=0;m.sizesCumulative=m.sizes.map(function(e){var t=n;return n+=e,t}),m.sizesCumulative.push(n)}else d();p()}function d(){T&&m.$$postDigest(function(){if(S[0].offsetHeight||S[0].offsetWidth){for(var e=S.children(),t=0,n=!1,r=!1;t<e.length;){if(null!=e[t].attributes[_]||r){if(n||(m.elementSize=0),n=!0,e[t][s]&&(m.elementSize+=e[t][s]),!k)break;if(null!=e[t].attributes["ng-repeat-end"]||null!=e[t].attributes["data-ng-repeat-end"])break;r=!0}t++}n&&(p(),T=!1,m.$root&&!m.$root.$$phase&&m.$apply())}else var o=m.$watch(function(){(S[0].offsetHeight||S[0].offsetWidth)&&(o(),d())})})}function E(){var e="tr"===o?"":"min-";return I.horizontal?e+"width":e+"height"}function f(){if(h()){m.$digest();var e=R?m.sizesCumulative[g]:m.elementSize*g;e!==S[0][l]&&console.warn("vsRepeat: size mismatch. Expected size "+e+"px whereas actual size is "+S[0][l]+"px. Fix vsSize on element:",t[0])}}function u(){I.autoresize&&(T=!0,d(),m.$root&&!m.$root.$$phase&&m.$apply()),h()&&m.$apply()}function p(){var e;$=x=void 0,z=g,y=0,e=R?m.sizesCumulative[g]:m.elementSize*g,m.totalSize=I.offsetBefore+e+I.offsetAfter,h(),m.$emit("vsRepeatReinitialized",m.startIndex,m.endIndex)}function v(){var e=U(O[0],C);e!==n&&(p(),m.$root&&!m.$root.$$phase&&m.$apply()),n=e}function h(){var e,t,n=(e=O[0],t=B,e===j?J()[t]:e[t]),r=U(O[0],C);I.debug&&(r/=2);var o,s,l,a=S[0]===O[0]?0:(o=S[0],s=O[0],l=I.horizontal,o.getBoundingClientRect()[l?"left":"top"]-(s===j?0:s.getBoundingClientRect()[l?"left":"top"])+(s===j?J():s)[l?"scrollLeft":"scrollTop"]),i=m.startIndex,c=m.endIndex;if(R){for(i=0;m.sizesCumulative[i]<n-I.offsetBefore-a-I.scrollMargin;)i++;for(0<i&&i--,c=i=Math.max(Math.floor(i-I.excess/2),0);m.sizesCumulative[c]<n-I.offsetBefore-a+I.scrollMargin+r;)c++;c=Math.min(Math.ceil(c+I.excess/2),g)}else i=Math.max(Math.floor((n-I.offsetBefore-a-I.scrollMargin)/m.elementSize)-I.excess/2,0),c=Math.min(i+Math.ceil(r/m.elementSize)+I.excess,g),T&&i===c&&c<g-1&&c++;z=Math.min(i,z),y=Math.max(c,y),m.startIndex=I.latch?z:i,m.endIndex=I.latch?y:c,y<m.startIndex&&(m.startIndex=y);var d=!1;if(null==x?d=!0:null==$&&(d=!0),d||(I.hunked?Math.abs(m.startIndex-x)>=I.excess/2||0===m.startIndex&&0!==x?d=!0:(Math.abs(m.endIndex-$)>=I.excess/2||m.endIndex===g&&$!==g)&&(d=!0):d=m.startIndex!==x||m.endIndex!==$),d){var f;m[P]=w.slice(m.startIndex,m.endIndex),m.$emit("vsRepeatInnerCollectionUpdated",m.startIndex,m.endIndex,x,$),I.scrolledToEnd&&(f=w.length-I.scrolledToEndOffset,(m.endIndex>=f&&$<f||w.length&&m.endIndex===w.length)&&m.$eval(I.scrolledToEnd)),I.scrolledToBeginning&&(f=I.scrolledToBeginningOffset,m.startIndex<=f&&x>m.startIndex&&m.$eval(I.scrolledToBeginning)),x=m.startIndex,$=m.endIndex;var u=N(R?"(sizesCumulative[$index + startIndex] + offsetBefore)":"(($index + startIndex) * elementSize + offsetBefore)"),p=u(m,{$index:0}),v=u(m,{$index:m[P].length}),h=m.totalSize;b.css(E(),p+"px"),M.css(E(),h-v+"px")}return d}m.elementSize=U(O[0],C)||50,I.excess=2,I.horizontal?(b.css("height","100%"),M.css("height","100%")):(b.css("width","100%"),M.css("width","100%")),e.vsRepeatOptions&&m.$watchCollection(e.vsRepeatOptions,function(e){var t=_extends({},I,e);JSON.stringify(t)!==JSON.stringify(I)&&(Object.assign(I,e),p())}),m.$watchCollection(L,function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];w=e,c()}),r.eq(0).attr(_,H+" in "+P+(q?" "+q:"")),r.addClass("vs-repeat-repeated-element"),S.append(b),S.append(r),W(r)(m),S.append(M),m.startIndex=0,m.endIndex=0,O.on("scroll",f),D.element(j).on("resize",u),m.$on("$destroy",function(){D.element(j).off("resize",u),O.off("scroll",f)}),m.$on("vsRepeatTrigger",c),m.$on("vsRepeatResize",function(){T=!0,d()}),m.$on("vsRenderAll",function(){I.latch&&setTimeout(function(){var e=g;y=Math.max(e,y),m.endIndex=I.latch?y:e,m[P]=w.slice(m.startIndex,m.endIndex),$=m.endIndex,m.$$postDigest(function(){b.css(E(),0),M.css(E(),0)}),m.$apply(function(){m.$emit("vsRenderAllDone")})})}),m.$watch(function(){"function"==typeof j.requestAnimationFrame?j.requestAnimationFrame(v):v()})}}}}}]);D.element(document.head).append('<style id="angular-vs-repeat-style">\n\t  \t.vs-repeat-debug-element {\n        top: 50%;\n        left: 0;\n        right: 0;\n        height: 1px;\n        background: red;\n        z-index: 99999999;\n        box-shadow: 0 0 20px red;\n      }\n\n      .vs-repeat-debug-element + .vs-repeat-debug-element {\n        display: none;\n      }\n    </style>'),"undefined"!=typeof module&&module.exports&&(module.exports=e.name)}(window,window.angular);