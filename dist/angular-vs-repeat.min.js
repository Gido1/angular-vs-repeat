function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _sliceIterator(e,t){var n=[],r=!0,o=!1,s=void 0;try{for(var a,i=e[Symbol.iterator]();!(r=(a=i.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,s=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw s}}return n}function _slicedToArray(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return _sliceIterator(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}!function(N,D){var F=D.element.prototype.closest;if(!F){var r=["matches","matchesSelector","webkitMatches","webkitMatchesSelector","msMatches","msMatchesSelector","mozMatches","mozMatchesSelector"].reduce(function(e,t){var n;return null!==(n=e)&&void 0!==n?n:t in document.documentElement?t:null},null);F=function(e){for(var t,n=this[0].parentNode;n!==document.documentElement&&null!=n&&!n[r](e);)n=n.parentNode;return(null===(t=n)||void 0===t?void 0:t[r](e))?D.element(n):D.element()}}function J(){var e,t,n,r;return"pageYOffset"in N?{scrollTop:N.pageYOffset,scrollLeft:N.pageXOffset}:{scrollTop:null!==(e=null!==(t=document.documentElement.scrollTop)&&void 0!==t?t:document.body.scrollTop)&&void 0!==e?e:0,scrollLeft:null!==(n=null!==(r=document.documentElement.scrollLeft)&&void 0!==r?r:document.body.scrollLeft)&&void 0!==n?n:0}}function U(e,t){return e===N?"clientWidth"===t?N.innerWidth:N.innerHeight:e[t]}function d(e){var t;t="".concat(e," attribute is deprecated. Use vs-repeat-options <link> instead."),console.warn("vs-repeat deprecation: ".concat(t))}var Y={latch:!1,hunked:!1,container:null,scrollParent:null,size:null,offsetBefore:0,offsetAfter:0,scrolledToBeginning:D.noop,scrolledToEnd:D.noop,scrolledToBeginningOffset:0,scrolledToEndOffset:0,scrollMargin:0,horizontal:!1,autoresize:!1,excess:0},e=D.module("vs-repeat",[]).directive("vsRepeat",["$compile","$parse",function(W,j){return{restrict:"A",scope:!0,compile:function(e,t){var n="vsRepeatContainer"in t?D.element(e[0].querySelector(t.vsRepeatContainer)):e,r=n.children(),o=r.eq(0),E=o[0].outerHTML,_="$vs_collection";["vsSize","vsScrollParent","vsSizeProperty","vsHorizontal","vsOffsetBefore","vsOffsetAfter","vsScrolledToEndOffset","vsScrolledToBeginningOffset","vsExcess","vsScrollMargin"].forEach(function(e){e in t&&d(e)}),t.vsRepeat&&d("vsRepeat");var s=_slicedToArray(function(e){for(var t=["ng-repeat","data-ng-repeat","ng-repeat-start","data-ng-repeat-start"],n=0;n<t.length;n++){var r=t[n];if(e.attr(r))return[r,e.attr(r),0<=r.indexOf("-start")]}throw new Error("angular-vs-repeat: no ng-repeat directive on a child element")}(o),3),P=s[0],a=s[1],k=s[2],i=_slicedToArray(/^\s*(\S+)\s+in\s+([\S\s]+?)(track\s+by\s+\S+)?$/.exec(a),4),H=i[1],L=i[2],q=i[3];if(k)for(var l=0,c=r.eq(l);null==c.attr("ng-repeat-end")&&null==c.attr("data-ng-repeat-end");)l++,c=r.eq(l),E+=c[0].outerHTML;return n.empty(),{pre:function(g,t,e){function n(e){if("number"==typeof e.size)e.getSize=function(){return e.size};else{var t=j(String(e.size));e.getSize=function(e){return t(g,_defineProperty({},H,e))}}}g.vsRepeat={options:_extends({},Y,"vsRepeatOptions"in e?g.$eval(e.vsRepeatOptions):{})};var x=g.vsRepeat.options;n(x);var z,y,$,R,b,r,I=D.isDefined(e.vsRepeatContainer)?D.element(t[0].querySelector(e.vsRepeatContainer)):t,o=D.element(E),s=o[0].tagName.toLowerCase(),S=[],w=D.element("<"+s+' class="vs-repeat-before-content"></'+s+">"),M=D.element("<"+s+' class="vs-repeat-after-content"></'+s+">"),T=null===x.size,O=x.scrollParent?"window"===x.scrollParent?D.element(N):F.call(I,x.scrollParent):I,C=x.horizontal?"clientWidth":"clientHeight",a=x.horizontal?"offsetWidth":"offsetHeight",i=x.horizontal?"scrollWidth":"scrollHeight",A=x.horizontal?"scrollLeft":"scrollTop";if((g.totalSize=0)===O.length)throw"Specified scroll parent selector did not match any element";if(g.$scrollParent=O,g.vsRepeat.sizesCumulative=[],x.debug){var l="window"===x.scrollParent?D.element(document.body):O,c=D.element('<div class="vs-repeat-debug-element"></div>');c.css("position","window"===x.scrollParent?"fixed":"absolute"),l.append(c),g.$on("$destroy",function(){c.remove()})}function d(){if(!S||S.length<1)g[_]=[],z=0,g.vsRepeat.sizesCumulative=[0];else if(z=S.length,x.size){var e=S.map(function(e){return x.getSize(e)}),t=0;g.vsRepeat.sizesCumulative=[0].concat(_toConsumableArray(e.map(function(e){return t+=e})))}else f();v()}function f(){T&&g.$$postDigest(function(){if(I[0].offsetHeight||I[0].offsetWidth){for(var e=I.children(),t=0,n=!1,r=!1;t<e.length;){if(null!=e[t].attributes[P]||r){if(n||(g.vsRepeat.elementSize=0),n=!0,e[t][a]&&(g.vsRepeat.elementSize+=e[t][a]),!k)break;if(null!=e[t].attributes["ng-repeat-end"]||null!=e[t].attributes["data-ng-repeat-end"])break;r=!0}t++}n&&(v(),T=!1,g.$root&&!g.$root.$$phase&&g.$apply())}else var o=g.$watch(function(){(I[0].offsetHeight||I[0].offsetWidth)&&(o(),f())})})}function B(){var e="tr"===s?"":"min-";return x.horizontal?e+"width":e+"height"}function u(){if(m()){g.$digest();var e=x.size?g.vsRepeat.sizesCumulative[z]:g.vsRepeat.elementSize*z;e!==I[0][i]&&console.warn("vsRepeat: size mismatch. Expected size "+e+"px whereas actual size is "+I[0][i]+"px. Fix vsSize on element:",t[0])}}function p(){x.autoresize&&(T=!0,f(),g.$root&&!g.$root.$$phase&&g.$apply()),m()&&g.$apply()}function v(){var e;$=y=void 0,R=z,b=0,e=x.size?g.vsRepeat.sizesCumulative[z]:g.vsRepeat.elementSize*z,g.totalSize=x.offsetBefore+e+x.offsetAfter,m(),g.$emit("vsRepeatReinitialized",g.startIndex,g.endIndex)}function h(){var e=U(O[0],C);e!==r&&(v(),g.$root&&!g.$root.$$phase&&g.$apply()),r=e}function m(){var e,t,n=(e=O[0],t=A,e===N?J()[t]:e[t]),r=U(O[0],C);x.debug&&(r/=2);var o,s,a,i=I[0]===O[0]?0:(o=I[0],s=O[0],a=x.horizontal,o.getBoundingClientRect()[a?"left":"top"]-(s===N?0:s.getBoundingClientRect()[a?"left":"top"])+(s===N?J():s)[a?"scrollLeft":"scrollTop"]),l=g.startIndex,c=g.endIndex;if(x.size){for(l=0;g.vsRepeat.sizesCumulative[l]<n-x.offsetBefore-i-x.scrollMargin;)l++;for(0<l&&l--,c=l=Math.max(Math.floor(l-x.excess/2),0);g.vsRepeat.sizesCumulative[c]<n-x.offsetBefore-i+x.scrollMargin+r;)c++;c=Math.min(Math.ceil(c+x.excess/2),z)}else l=Math.max(Math.floor((n-x.offsetBefore-i-x.scrollMargin)/g.vsRepeat.elementSize)-x.excess/2,0),c=Math.min(l+Math.ceil(r/g.vsRepeat.elementSize)+x.excess,z),T&&l===c&&c<z-1&&c++;R=Math.min(l,R),b=Math.max(c,b),g.startIndex=x.latch?R:l,g.endIndex=x.latch?b:c,b<g.startIndex&&(g.startIndex=b);var d=!1;if(null==y?d=!0:null==$&&(d=!0),d||(x.hunked?Math.abs(g.startIndex-y)>=x.excess/2||0===g.startIndex&&0!==y?d=!0:(Math.abs(g.endIndex-$)>=x.excess/2||g.endIndex===z&&$!==z)&&(d=!0):d=g.startIndex!==y||g.endIndex!==$),d){var f;g[_]=S.slice(g.startIndex,g.endIndex),g.$emit("vsRepeatInnerCollectionUpdated",g.startIndex,g.endIndex,y,$),x.scrolledToEnd&&(f=S.length-x.scrolledToEndOffset,(g.endIndex>=f&&$<f||S.length&&g.endIndex===S.length)&&g.$eval(x.scrolledToEnd)),x.scrolledToBeginning&&(f=x.scrolledToBeginningOffset,g.startIndex<=f&&y>g.startIndex&&g.$eval(x.scrolledToBeginning)),y=g.startIndex,$=g.endIndex;var u=x.size?"(vsRepeat.sizesCumulative[$index + startIndex] + offsetBefore)":"(($index + startIndex) * vsRepeat.elementSize + offsetBefore)",p=j(u),v=p(g,{$index:0}),h=p(g,{$index:g[_].length}),m=g.totalSize;w.css(B(),v+"px"),M.css(B(),m-h+"px")}return d}g.vsRepeat.elementSize=U(O[0],C)||50,x.horizontal?(w.css("height","100%"),M.css("height","100%")):(w.css("width","100%"),M.css("width","100%")),e.vsRepeatOptions&&g.$watchCollection(e.vsRepeatOptions,function(e){var t=_extends({},x,e);JSON.stringify(t)!==JSON.stringify(x)&&(Object.assign(x,e),n(x),v())}),g.$watchCollection(L,function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];S=e,d()}),o.eq(0).attr(P,H+" in "+_+(q?" "+q:"")),o.addClass("vs-repeat-repeated-element"),I.append(w),I.append(o),W(o)(g),I.append(M),g.startIndex=0,g.endIndex=0,O.on("scroll",u),D.element(N).on("resize",p),g.$on("$destroy",function(){D.element(N).off("resize",p),O.off("scroll",u)}),g.$on("vsRepeatTrigger",d),g.$on("vsRepeatResize",function(){T=!0,f()}),g.$on("vsRenderAll",function(){x.latch&&setTimeout(function(){var e=z;b=Math.max(e,b),g.endIndex=x.latch?b:e,g[_]=S.slice(g.startIndex,g.endIndex),$=g.endIndex,g.$$postDigest(function(){w.css(B(),0),M.css(B(),0)}),g.$apply(function(){g.$emit("vsRenderAllDone")})})}),g.$watch(function(){"function"==typeof N.requestAnimationFrame?N.requestAnimationFrame(h):h()})}}}}}]);D.element(document.head).append('<style id="angular-vs-repeat-style">\n\t  \t.vs-repeat-debug-element {\n        top: 50%;\n        left: 0;\n        right: 0;\n        height: 1px;\n        background: red;\n        z-index: 99999999;\n        box-shadow: 0 0 20px red;\n      }\n\n      .vs-repeat-debug-element + .vs-repeat-debug-element {\n        display: none;\n      }\n    </style>'),"undefined"!=typeof module&&module.exports&&(module.exports=e.name)}(window,window.angular);